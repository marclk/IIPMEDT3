<!DOCTYPE HTML>
<html>
  <head>
    <title>A-Frame Lab</title>
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script>
     <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.1.2/dist/aframe-physics-system.min.js"></script>
     <script src="https://unpkg.com/aframe-event-set-component@^4.1.1/dist/aframe-event-set-component.min.js"></script>
     <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
     <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
     <!-- <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script> -->

    <!-- <script src="pipet_oculus.js"></script> -->

    <!-- pls dont delete is pickup -->
    <!-- <script src="build.js"></script> -->
    <script>
      window.onload = function (e) {
        document.querySelector('#leftHand').addEventListener('pointingstart', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: true})
        })
        document.querySelector('#rightHand').addEventListener('pointingstart', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: true})
        })
        document.querySelector('#leftHand').addEventListener('pointingend', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: false})
        })
        document.querySelector('#rightHand').addEventListener('pointingend', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: false})
        })
      }
    </script>
  </head>
  <body>


    <a-scene physics="gravity: -8.8;debug:true;" renderer="highRefreshRate:true;">
      <a-assets>
          <!-- <img id="red" src="textures/red.png">
          <img id="blue" src="textures/blue.png">
          <img id="green" src="textures/green.png"> -->
        <!-- <a-mixin id="controller"
                 super-hands="colliderEvent: collisions;
                              colliderEventProperty: els;
                              colliderEndEvent: collisions;
                              colliderEndEventProperty: clearedEls;
                              grabStartButtons: gripdown, pointdown, triggerdown;
                              grabEndButtons: gripup, pointup, triggerup"
                 static-body="shape: sphere; sphereRadius: 0.11"
                 physics-collider  collision-filter = "collidesWith: default, red, green, blue;   collisionForces: false" >
        </a-mixin> -->
        <!-- <a-mixin id="cube" geometry="width: 0.5; height: 0.5; depth: 0.5" dynamic-body
                 hoverable grabbable></a-mixin>
        <a-mixin id="cube-hovered" material="opacity: 0.7; transparent: true"></a-mixin> -->



        <a-mixin id="touch"
                         physics-collider phase-shift
                        collision-filter = "collidesWith: default, red, green, blue;   collisionForces: false"
                         static-body="shape: sphere; sphereRadius: 0.11"
                         super-hands="colliderEvent: collisions;
                                      colliderEventProperty: els;
                                      colliderEndEvent: collisions;
                                      colliderEndEventProperty: clearedEls;
                                      grabStartButtons: gripdown, pointdown, triggerdown;
                                      grabEndButtons: gripup, pointup, triggerup">
                </a-mixin>



      </a-assets>

      <a-entity id="rig"
          movement-controls="speed:0.15; constrainToNavMesh: true"
          position="0 0 0" rotation="0 0 0" >
        <a-entity camera     position="0 1.6 0" look-controls="pointerLockEnabled: true">

          </a-entity>
            <!-- <a-entity id="rightHand" hand-controls="right" mixin="controller">
            </a-entity>
            <a-entity id="leftHand" hand-controls="left" mixin="controller">

            </a-entity> -->

            <a-entity id="rhand" mixin="touch"

                              oculus-touch-controls="hand: right"
                              >
                    </a-entity>
                    <a-entity id="lhand"  mixin="touch"
                                      oculus-touch-controls="hand: left"
                                      >
                            </a-entity>
</a-entity>


<!-- <a-entity id="cameraRig">

  <a-entity id="head" camera wasd-controls look-controls></a-entity>
  <a-entity teleport-controls="cameraRig: #cameraRig; button: trigger;"
    vive-controls="hand: left"
    oculus-touch-controls="hand: left"
    microsoft-motion-controls="hand: left"
    daydream-controls="left" gearvr-controls="left"
    super-hands="colliderEvent: collisions;
                 colliderEventProperty: els;
                 colliderEndEvent: collisions;
                 colliderEndEventProperty: clearedEls;
                 grabStartButtons: gripdown, pointdown, triggerdown;
                 grabEndButtons: gripup, pointup, triggerup"
    static-body="shape: sphere; sphereRadius: 0.11"
    physics-collider
    collision-filter = "collidesWith: default, red, green, blue;
                        collisionForces: false">
  </a-entity>
  <a-entity teleport-controls="cameraRig: #cameraRig; type: line; button: trigger;"
    vive-controls="hand: right"
    microsoft-motion-controls="hand: right"
    oculus-touch-controls="hand: right"
    daydream-controls="right" gearvr-controls="right">
  </a-entity>
  </a-entity> -->
 <!-- hand-controls="right" -->


      <!-- <a-box mixin="cube" sleepy position="0 1 -1" src="#red"
             collision-filter="group: red; collidesWith: default, red, blue">
      </a-box>
      <a-box mixin="cube" sleepy position="0 1.6 -1"  src="#red"
             collision-filter="group: red; collidesWith: default, red, blue">
      </a-box> -->

      <!-- <a-box mixin="cube" position="-0.5 1 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box> -->
      <!-- <a-box mixin="cube" position="-0.5 2 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box> -->



      <a-entity gltf-model="scene/navmesh-kamer.gltf"  nav-mesh></a-entity>
      <a-entity gltf-model="scene/navmesh-full.gltf" visible="false" position="0 -0.179 0"  nav-mesh></a-entity>
      <a-entity gltf-model="scene/SceneV6.gltf" scale="1 1 1" position="0 0 0"  modify-materials geometry="primitive:  box; height: 0.001; depth: 0.001;width:0.001;" collision-filter="group: green; collidesWith: default, green" static-body></a-entity>
       <!-- collision-filter="group: green; collidesWith: default, green" static-body -->

       <a-entity id="js--bril" gltf-model="models/SafetyBril/SafetyGoggle.gltf"  geometry="primitive: box; width: .025; height: .25; depth: .025" rotation="0 -90 0" scale=".15 .15 .15" position="-0.215 1.560 -8.368" modify-materials    static-body ></a-entity>
       <a-entity id="js--labcoat"   gltf-model="models/Labjas/labjas.gltf"  geometry="primitive: box; width: .025; height: .25; depth: .025" rotation="0 -165.820 0" scale=".7 .7 .7" position="-0.086 1.560 -8.074" modify-materials    static-body ></a-entity>

      <a-entity class="grabbable" id="js--pipet-container-1" geometry="primitive: box; width: .04; height: .25; depth: .04" position="3 1 1" modify-materials grabbable hoverable dynamic-body collision-filter="group: green; collidesWith: default, green">
         <a-entity id="js--pipet" scale="2 2 2" gltf-model="models/Pipet/pipetLowPoly.gltf"></a-entity>
        <a-plane id="js--pipet-feedbar" side="double" color="crimson" width=".02" height=".3" position="0 0 -.03"></a-plane>
      </a-entity>


<a-entity id="bigbox" geometry="primitive: box; depth:1;height:1;width:1; "  modify-materials dynamic-body hoverable grabbable rotation="0 180 0" position="-0.5 2 -0.5"  collision-filter="group: green; collidesWith: default, green" ></a-entity>


      <a-entity class="grabbable" id="js--pipet-container-2" geometry="primitive: box; width: 0.08; height: 0.450; depth: 0.06" position="-.5 1 -.5" modify-materials grabbable hoverable dynamic-body collision-filter="group: green; collidesWith: default, green">
         <a-entity id="js--pipet" scale="2 2 2" gltf-model="models/Pipet/pipetLowPoly.gltf"></a-entity>
        <a-plane id="js--pipet-feedbar" side="double" color="crimson" width=".02" height=".3" position="0 0 -.03"></a-plane>
      </a-entity>

     <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable scale="0.003 0.003 0.003" rotation="0 180 0" position="-0.5 2 -0.5"  collision-filter="group: green; collidesWith: default, green" ></a-entity>

     <!-- Long wall sheared -->
     <a-plane width="5" visible="false" height="15"  position="-1.738 1.015 1.013" color="red" rotation="0 86.530 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <!-- short wall with door -->
     <a-plane width="5" visible="false" height="4"  position="-0.035 1.015 -8.406" color="red" rotation="0 90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <a-box  geometry="primitive:  box; height: 13.560; depth: 1.920;width:1.350" visible="false" id="tsst"  position="7.463 0.272 -0.105" color="yellow" rotation="0 90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
     <a-box  geometry="primitive:  box; height: 6.4; depth: 1.130;width:3.150" visible="false" id="tsst"   position="-1.879 1.531 1.711" color="yellow" rotation="0 86.290 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
     <a-entity visible="false">
     <a-box  geometry="primitive:  box; height: 3.250; depth: .910;width:1.380"  id="tsst"  position="2.706 0.481 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
    <a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="1.869 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
    <a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="3.147 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
  </a-entity>

     <a-entity position="0 0 8.998" visible="false">
     <a-box  geometry="primitive:  box; height: 3.250; depth: .910;width:1.380"  id="tsst"  position="2.706 0.481 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
    <a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="1.869 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
    <a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="3.147 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
  </a-entity>

  <a-entity position="0 0 2.991" visible="false">
  <a-box  geometry="primitive:  box; height: 3.250; depth: .910;width:1.380"  id="tsst"  position="2.706 0.481 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
 <a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="1.869 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
 <a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="3.147 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
</a-entity>

<a-entity position="0 0 5.998" visible="false">
<a-box  geometry="primitive:  box; height: 3.250; depth: .910;width:1.380"  id="tsst"  position="2.706 0.481 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
<a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="1.869 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
<a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="3.147 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
</a-entity>

<a-entity position="6.084 0 -3.542" rotation="0 90 0" visible="false">
<a-box  geometry="primitive:  box; height: 3.250; depth: .910;width:1.380"  id="tsst"  position="2.706 0.481 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
<a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="1.869 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
<a-box  geometry="primitive:  box; height: 0.190; depth: 0.620;width:0.390"  id="tsst"  position="3.147 1.148 -2.418" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-box>
</a-entity>
     <!-- floor -->
     <a-plane width="12" height="21"  visible="false" id="tsst" geometry="primitive: plane; width: 21; height: 20" position="2.937 0 -1.136" color="red" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <a-plane width="12" height="21" visible="false"  id="tsst" geometry="primitive: plane; width: 21; height: 20" position="2.937 4 -1.136" color="red" rotation="90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>


     <!-- Long wall with door -->
     <a-plane width="4" height="10.5" visible="false"  position="2.760 1.932 8.164" color="red" rotation="0 -180 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <!-- Window Wall -->
     <a-plane width="4" height="20" visible="false"  position="7.510 1.547 -0.314" color="red" rotation="0 -90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <!-- Short wall at door -->
     <a-plane width="5" height="10"  visible="false" position="3.540 1.072 -9.953" color="red" rotation="0 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <!-- Shortest wall without door -->
      <a-plane width="5" height="2"  visible="false" position="-1.046 1.072 -6.419" color="red" rotation="0 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <!--
        <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable gltf-model="url(models/scene.gltf)" scale="0.003 0.003 0.003" rotation="0 180 0" position="1 2 -0.5"  collision-filter="group: green; collidesWith: default, green" ></a-entity>
        <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable gltf-model="url(models/scene.gltf)" scale="0.003 0.003 0.003" rotation="0 180 0" position="0 2 -0.5"  collision-filter="group: green; collidesWith: default, green" ></a-entity>
        <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable gltf-model="url(models/scene.gltf)" scale="0.003 0.003 0.003" rotation="0 180 0" position="-0.5 2 0"  collision-filter="group: green; collidesWith: default, green" ></a-entity> -->
      <!-- <a-box mixin="cube" position="1 1 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green" >
      </a-box>
      <a-box mixin="cube" position="1 2 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green" scale="0.5 0.5 0.5">
      </a-box>

      <a-box mixin="cube" position="0 1 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box>
      <a-box mixin="cube" position="0 2 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box> -->

      <!-- <a-box mixin="cube" position="1 1 -1" src="#blue"
             sleepy="angularDamping: 0; speedLimit: 1"
             collision-filter="group: blue; collidesWith: default, red">
      </a-box>
      <a-box mixin="cube" position="1 1.6 -1" src="#blue"
             sleepy="angularDamping: 0; speedLimit: 1"
             collision-filter="group: blue; collidesWith: default, red">
      </a-box> -->
      <!-- Terrain -->
      <a-grid static-body
              collision-filter="group: default; collides With: red, green, blue" width="15" height="20">
      </a-grid >

      <!-- <a-plane width="5" height="5"  position="0 0 0" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="-2.332 0 0" color="white" rotation="0 90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="2.332 0 0" color="white" rotation="0 -90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="0.078 0 2.470" color="white" rotation="0 -180 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="0.078 0 -2.470" color="white" rotation="0 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

      <a-plane width="5" height="5"  position="0.078 0 -1.463" color="white" rotation="-45 0 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="-1.550 0 -0.007" color="white" rotation="-45 90 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="0.062 0 1.425" color="white" rotation="-45 180 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="1.419 0 0.147" color="white" rotation="-45 -90 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane> -->

      <!-- Lighting -->
      <a-entity light="type: point; color: #f4f4f4; intensity: 0.2; distance: 0" position="8 10 18"></a-entity>
      <a-entity light="type: point; color: #f4f4f4; intensity: 0.6; distance: 0" position="-8 10 -18"></a-entity>
      <a-entity light="type: ambient; color: #f4f4f4; intensity: 0.4;" position="-8 10 -18"></a-entity>

    </a-scene>
    <script src="main.js"></script>
    <script src="pipet_oculus_v2.js"></script>


  </body>
</html>
