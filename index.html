<!DOCTYPE HTML>
<html>
  <head>
    <title>A-Frame Physics Extras Example</title>
    <script src="https://aframe.io/releases/0.7.0/aframe.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v2.1.0/dist/aframe-physics-system.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src="build.js"></script>
    <script>
      window.onload = function (e) {
        document.querySelector('#leftHand').addEventListener('pointingstart', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: true})
        })
        document.querySelector('#rightHand').addEventListener('pointingstart', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: true})
        })
        document.querySelector('#leftHand').addEventListener('pointingend', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: false})
        })
        document.querySelector('#rightHand').addEventListener('pointingend', function (e2) {
          e2.target.setAttribute('collision-filter', {collisionForces: false})
        })
      }
    </script>
    <link rel="stylesheet" type="text/css" href="examples.css">
  </head>
  <body>
    <body>

    <a-scene physics="gravity: -8.8;debug:true;" >
      <a-assets>
          <!-- <img id="red" src="textures/red.png">
          <img id="blue" src="textures/blue.png">
          <img id="green" src="textures/green.png"> -->
        <a-mixin id="controller"
                 super-hands="colliderEvent: collisions;
                              colliderEventProperty: els;
                              colliderEndEvent: collisions;
                              colliderEndEventProperty: clearedEls;
                              grabStartButtons: gripdown, pointdown, triggerdown;
                              grabEndButtons: gripup, pointup, triggerup"
                 static-body="shape: sphere; sphereRadius: 0.11"
                 physics-collider
                 collision-filter = "collidesWith: default, red, green, blue;
                                     collisionForces: false" >
        </a-mixin>
        <!-- <a-mixin id="cube" geometry="width: 0.5; height: 0.5; depth: 0.5" dynamic-body
                 hoverable grabbable></a-mixin>
        <a-mixin id="cube-hovered" material="opacity: 0.7; transparent: true"></a-mixin> -->
      </a-assets>

      <a-entity id="rightHand" hand-controls="right" mixin="controller">
      </a-entity>
      <a-entity id="leftHand" hand-controls="left" mixin="controller">
      </a-entity>

      <!-- <a-box mixin="cube" sleepy position="0 1 -1" src="#red"
             collision-filter="group: red; collidesWith: default, red, blue">
      </a-box>
      <a-box mixin="cube" sleepy position="0 1.6 -1"  src="#red"
             collision-filter="group: red; collidesWith: default, red, blue">
      </a-box> -->

      <!-- <a-box mixin="cube" position="-0.5 1 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box> -->
      <!-- <a-box mixin="cube" position="-0.5 2 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box> -->

      <a-entity gltf-model="scene/SceneV4.gltf" scale="1 1 1" position="0 0 0"  modify-materials geometry="primitive: box;" collision-filter="group: green; collidesWith: default, green" static-body></a-entity>
       <!-- collision-filter="group: green; collidesWith: default, green" static-body -->

     <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable gltf-model="url(models/scene.gltf)" scale="0.003 0.003 0.003" rotation="0 180 0" position="-0.5 2 -0.5"  collision-filter="group: green; collidesWith: default, green" ></a-entity>

     <a-plane width="5" height="5"  position="-2.332 0 0" color="red" rotation="0 90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
     <a-plane width="5" height="5"  position="2.332 0 0" color="red" rotation="0 -90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
     <a-plane width="5" height="5"  position="0.078 0 2.470" color="red" rotation="0 -180 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
     <a-plane width="5" height="10"  position="3.540 1.072 -9.953" color="red" rotation="0 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

     <!--
        <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable gltf-model="url(models/scene.gltf)" scale="0.003 0.003 0.003" rotation="0 180 0" position="1 2 -0.5"  collision-filter="group: green; collidesWith: default, green" ></a-entity>
        <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable gltf-model="url(models/scene.gltf)" scale="0.003 0.003 0.003" rotation="0 180 0" position="0 2 -0.5"  collision-filter="group: green; collidesWith: default, green" ></a-entity>
        <a-entity geometry="primitive: sphere; radius:0.25 "  modify-materials dynamic-body hoverable grabbable gltf-model="url(models/scene.gltf)" scale="0.003 0.003 0.003" rotation="0 180 0" position="-0.5 2 0"  collision-filter="group: green; collidesWith: default, green" ></a-entity> -->
      <!-- <a-box mixin="cube" position="1 1 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green" >
      </a-box>
      <a-box mixin="cube" position="1 2 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green" scale="0.5 0.5 0.5">
      </a-box>

      <a-box mixin="cube" position="0 1 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box>
      <a-box mixin="cube" position="0 2 -0.5" src="#green"
             collision-filter="group: green; collidesWith: default, green">
      </a-box> -->

      <!-- <a-box mixin="cube" position="1 1 -1" src="#blue"
             sleepy="angularDamping: 0; speedLimit: 1"
             collision-filter="group: blue; collidesWith: default, red">
      </a-box>
      <a-box mixin="cube" position="1 1.6 -1" src="#blue"
             sleepy="angularDamping: 0; speedLimit: 1"
             collision-filter="group: blue; collidesWith: default, red">
      </a-box> -->
      <!-- Terrain -->
      <a-grid static-body
              collision-filter="group: default; collides With: red, green, blue">
      </a-grid>

      <!-- <a-plane width="5" height="5"  position="0 0 0" color="green" rotation="-90 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="-2.332 0 0" color="white" rotation="0 90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="2.332 0 0" color="white" rotation="0 -90 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="0.078 0 2.470" color="white" rotation="0 -180 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="0.078 0 -2.470" color="white" rotation="0 0 90" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>

      <a-plane width="5" height="5"  position="0.078 0 -1.463" color="white" rotation="-45 0 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="-1.550 0 -0.007" color="white" rotation="-45 90 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="0.062 0 1.425" color="white" rotation="-45 180 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane>
      <a-plane width="5" height="5"  position="1.419 0 0.147" color="white" rotation="-45 -90 0" collision-filter="group: green; collidesWith: default, green" static-body></a-plane> -->

      <!-- Lighting -->
      <a-entity light="type: point; color: #f4f4f4; intensity: 0.2; distance: 0" position="8 10 18"></a-entity>
      <a-entity light="type: point; color: #f4f4f4; intensity: 0.6; distance: 0" position="-8 10 -18"></a-entity>
      <a-entity light="type: ambient; color: #f4f4f4; intensity: 0.4;" position="-8 10 -18"></a-entity>
    </a-scene>
  </body>
</html>
